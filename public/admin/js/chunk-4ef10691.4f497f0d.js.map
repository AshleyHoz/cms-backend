{"version":3,"sources":["webpack:///./src/views/Category/List.vue?ca5e","webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/views/Category/List.vue?2e93","webpack:///src/views/Category/List.vue","webpack:///./src/views/Category/List.vue?b7fb","webpack:///./src/views/Category/List.vue"],"names":["dP","f","FProto","Function","prototype","nameRE","NAME","configurable","get","this","match","e","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","loadNode","defaultProps","scopedSlots","_u","key","fn","ref","node","data","_s","label","on","$event","stopPropagation","openEditModal","openInsertModal","openRemoveModal","insertModalShow","rules","insertForm","model","value","callback","$$v","$set","expression","slot","append","editModalShow","editForm","appendEdit","delModalShow","remove","staticRenderFns","component"],"mappings":"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","file":"js/chunk-4ef10691.4f497f0d.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=style&index=0&id=4031f504&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=style&index=0&id=4031f504&lang=scss&scoped=true&\"","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"list\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"分类列表\")]),_c('div',{staticClass:\"content\"},[_c('el-tree',{attrs:{\"lazy\":\"\",\"load\":_vm.loadNode,\"props\":_vm.defaultProps},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',[_vm._v(_vm._s(node.label))]),_c('span',[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){$event.stopPropagation();return (function () { return _vm.openEditModal(data); })($event)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t编辑\\n\\t\\t\\t\\t\\t\")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\",\"icon\":\"el-icon-circle-plus\"},on:{\"click\":function($event){$event.stopPropagation();return (function () { return _vm.openInsertModal(data); })($event)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t添加\\n\\t\\t\\t\\t\\t\")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){$event.stopPropagation();return (function () { return _vm.openRemoveModal(data); })($event)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t删除\\n\\t\\t\\t\\t\\t\")])],1)])}}])}),_c('el-dialog',{attrs:{\"title\":\"添加分类\",\"visible\":_vm.insertModalShow},on:{\"update:visible\":function($event){_vm.insertModalShow=$event}}},[_c('el-form',{ref:\"insertForm\",attrs:{\"rules\":_vm.rules,\"model\":_vm.insertForm}},[_c('el-form-item',{attrs:{\"label\":\"分类名称\",\"label-width\":\"120px\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.insertForm.name),callback:function ($$v) {_vm.$set(_vm.insertForm, \"name\", $$v)},expression:\"insertForm.name\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.insertModalShow = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.append}},[_vm._v(\"添 加\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"编辑分类\",\"visible\":_vm.editModalShow},on:{\"update:visible\":function($event){_vm.editModalShow=$event}}},[_c('el-form',{ref:\"editForm\",attrs:{\"rules\":_vm.rules,\"model\":_vm.editForm}},[_c('el-form-item',{attrs:{\"label\":\"分类名称\",\"label-width\":\"120px\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.editForm.name),callback:function ($$v) {_vm.$set(_vm.editForm, \"name\", $$v)},expression:\"editForm.name\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editModalShow = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.appendEdit}},[_vm._v(\"修 改\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"提示\",\"visible\":_vm.delModalShow},on:{\"update:visible\":function($event){_vm.delModalShow=$event}}},[_c('span',[_vm._v(\"您确定删除此分类？\")]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.delModalShow = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.remove}},[_vm._v(\"确 定\")])],1)])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\r\n\t<div class=\"list\">\r\n\t\t<div class=\"title\">分类列表</div>\r\n\t\t<div class=\"content\">\r\n\t\t\t<!-- <span>分类列表</span> -->\r\n\t\t\t<el-tree lazy :load=\"loadNode\" :props=\"defaultProps\">\r\n\t\t\t\t<span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\r\n\t\t\t\t\t<span>{{ node.label }}</span>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<!-- 点击时发现触发多层，事件冒泡的原因，用.stop修饰符阻止事件冒泡 -->\r\n\t\t\t\t\t\t<el-button type=\"text\" size=\"mini\" icon=\"el-icon-edit\" @click.stop=\"() => openEditModal(data)\">\r\n\t\t\t\t\t\t\t编辑\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<el-button type=\"text\" size=\"mini\" icon=\"el-icon-circle-plus\" @click.stop=\"() => openInsertModal(data)\">\r\n\t\t\t\t\t\t\t添加\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<el-button type=\"text\" size=\"mini\" icon=\"el-icon-delete\" @click.stop=\"() => openRemoveModal(data)\">\r\n\t\t\t\t\t\t\t删除\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</span>\r\n\t\t\t</el-tree>\r\n\r\n\t\t\t<!-- 添加、删除，使用模态框 -->\r\n\t\t\t<!-- 添加弹窗 -->\r\n\t\t\t<el-dialog title=\"添加分类\" :visible.sync=\"insertModalShow\">\r\n\t\t\t\t<el-form ref=\"insertForm\" :rules=\"rules\" :model=\"insertForm\">\r\n\t\t\t\t\t<el-form-item label=\"分类名称\" label-width=\"120px\" prop=\"name\">\r\n\t\t\t\t\t\t<el-input v-model=\"insertForm.name\" autocomplete=\"off\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-form>\r\n\t\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t\t<el-button @click=\"insertModalShow = false\">取 消</el-button>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"append\">添 加</el-button>\r\n\t\t\t\t</div>\r\n\t\t\t</el-dialog>\r\n\r\n\t\t\t<!-- 编辑弹窗 -->\r\n\t\t\t<el-dialog title=\"编辑分类\" :visible.sync=\"editModalShow\">\r\n\t\t\t\t<el-form ref=\"editForm\" :rules=\"rules\" :model=\"editForm\">\r\n\t\t\t\t\t<el-form-item label=\"分类名称\" label-width=\"120px\" prop=\"name\">\r\n\t\t\t\t\t\t<el-input v-model=\"editForm.name\" autocomplete=\"off\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-form>\r\n\t\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t\t<el-button @click=\"editModalShow = false\">取 消</el-button>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"appendEdit\">修 改</el-button>\r\n\t\t\t\t</div>\r\n\t\t\t</el-dialog>\r\n\r\n\t\t\t<!-- 删除弹窗 -->\r\n\t\t\t<el-dialog title=\"提示\" :visible.sync=\"delModalShow\">\r\n\t\t\t\t<span>您确定删除此分类？</span>\r\n\t\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t\t<el-button @click=\"delModalShow = false\">取 消</el-button>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"remove\">确 定</el-button>\r\n\t\t\t\t</span>\r\n\t\t\t</el-dialog>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport { Category } from '@/api/index.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdefaultProps: {\r\n\t\t\t\t\tchildren: 'son',\r\n\t\t\t\t\tlabel: 'name'\r\n\t\t\t\t},\r\n\t\t\t\tnodeData: '', //节点数据\r\n\t\t\t\tinsertModalShow: false,\r\n\t\t\t\teditModalShow: false,\r\n\t\t\t\tdelModalShow: false,\r\n\t\t\t\tinsertForm: {\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tparent_id: ''\r\n\t\t\t\t},\r\n\t\t\t\teditForm: {\r\n\t\t\t\t\tid: '',\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tparent_id: '',\r\n\t\t\t\t},\r\n\t\t\t\trules: {\r\n\t\t\t\t\tname: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: '请输入分类名称',\r\n\t\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmin: 2,\r\n\t\t\t\t\t\t\tmax: 20,\r\n\t\t\t\t\t\t\tmessage: '长度在 2 到 20 个字符',\r\n\t\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//树形结构懒加载\r\n\t\t\t// 获取各级子分类\r\n\t\t\tasync loadNode(node, resolve) {\r\n\t\t\t\t// console.log(node)\r\n\t\t\t\tif (node.level == 0) {\r\n\t\t\t\t\t// 根节点\r\n\t\t\t\t\treturn resolve([{\r\n\t\t\t\t\t\tcategory_id: 0,\r\n\t\t\t\t\t\tname: '全部分类',\r\n\t\t\t\t\t}])\r\n\t\t\t\t}\r\n\t\t\t\tif (node.level > 0) {\r\n\t\t\t\t\t// 请求数据\r\n\t\t\t\t\tconsole.log(node)\r\n\t\t\t\t\t// 原写法\r\n\t\t\t\t\t// let id = node.data.category_id;\r\n\t\t\t\t\t// // 传参请求子分类\r\n\t\t\t\t\t// let { status, data } = await Category.subCate({ id });\r\n\t\t\t\t\t// resolve(data);\r\n\r\n\t\t\t\t\t// 修改后\r\n\t\t\t\t\tif (node.data.category_id == 0) {\r\n\t\t\t\t\t\tlet id = node.data.category_id;\r\n\t\t\t\t\t\t// 传参请求子分类\r\n\t\t\t\t\t\tlet { status, data } = await Category.subCate({ id });\r\n\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t} else if (node.data.id > 0) {\r\n\t\t\t\t\t\tlet id = node.data.id;\r\n\t\t\t\t\t\t// 传参请求子分类\r\n\t\t\t\t\t\tlet { status, data } = await Category.subCate({ id });\r\n\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 打开添加模态框\r\n\t\t\topenInsertModal(data) { //可将data解构，只用需要的category_id\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\t// 转存节点数据\r\n\t\t\t\tthis.nodeData = data;\r\n\t\t\t\tif (data.category_id == 0) {\r\n\t\t\t\t\tthis.insertForm.parent_id = data.category_id;\r\n\t\t\t\t}\r\n\t\t\t\tif (data.id > 0) {\r\n\t\t\t\t\tthis.insertForm.parent_id = data.id;\r\n\t\t\t\t}\r\n\t\t\t\tthis.insertModalShow = true;\r\n\t\t\t},\r\n\r\n\t\t\t// 添加子节点\r\n\t\t\tappend() {\r\n\t\t\t\tthis.$refs.insertForm.validate(async (valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tconsole.log(this.nodeData)\r\n\t\t\t\t\t\t// 使用扩展运算符将两个参数直接传进去\r\n\t\t\t\t\t\tlet { status, data, msg } = await Category.insert({ ...this.insertForm });\r\n\t\t\t\t\t\tif (status) {\r\n\t\t\t\t\t\t\tif (!this.nodeData.children) {\r\n\t\t\t\t\t\t\t\tthis.$set(this.nodeData, 'children', [])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.nodeData.category_id == 0) {\r\n\t\t\t\t\t\t\t\tlet category_id = data.id;\r\n\t\t\t\t\t\t\t\t// 插入数据到子节点\r\n\t\t\t\t\t\t\t\tthis.nodeData.children.push({ ...this.insertForm, category_id })\r\n\t\t\t\t\t\t\t} else if (this.nodeData.id > 0) {\r\n\t\t\t\t\t\t\t\tlet id = data.id;\r\n\t\t\t\t\t\t\t\t// 插入数据到子节点\r\n\t\t\t\t\t\t\t\tthis.nodeData.children.push({ ...this.insertForm, id })\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// 添加到尾部  使用append就不需要上面的子节点判断\r\n\t\t\t\t\t\t\t// this.$refs.tree.append({...this.insertForm,category_id},this.node)\r\n\t\t\t\t\t\t\t// 提示插入成功\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\tmessage: '插入成功',\r\n\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t// 关闭模态框\r\n\t\t\t\t\t\t\tthis.insertModalShow = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message.error(msg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t// 打开编辑模态框\r\n\t\t\topenEditModal(data) {\r\n\t\t\t\tthis.nodeData = data;\r\n\t\t\t\tthis.editForm.name = this.nodeData.name;\r\n\t\t\t\tif (data.category_id == 0) {\r\n\t\t\t\t\t// edit需要id字段，在此处添加至表单对象\r\n\t\t\t\t\tthis.editForm.id = data.category_id;\r\n\t\t\t\t\t// edit需要parent_id字段，在此处添加至表单对象\r\n\t\t\t\t\tthis.editForm.parent_id = data.category_id;\r\n\t\t\t\t}\r\n\t\t\t\tif (data.id > 0) {\r\n\t\t\t\t\tthis.editForm.id = data.id;\r\n\t\t\t\t\tthis.editForm.parent_id = data.parent_id;\r\n\t\t\t\t}\r\n\t\t\t\t// 法二  不必刷新界面\r\n\t\t\t\t// this.node = data;\r\n\t\t\t\t// this.editForm = {...data,id:data.category_id}\r\n\t\t\t\tthis.editModalShow = true;\r\n\t\t\t},\r\n\r\n\t\t\t// 编辑节点\r\n\t\t\tappendEdit() {\r\n\t\t\t\tthis.$refs.editForm.validate(async (valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tlet { status, data, msg } = await Category.edit({ ...this.editForm });\r\n\t\t\t\t\t\tif (status) {\r\n\t\t\t\t\t\t\tthis.nodeData.name = this.editForm.name;\r\n\t\t\t\t\t\t\t// this.node = this.editForm\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\tmessage: '修改成功',\r\n\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.editModalShow = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message.error(msg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t// 打开删除模态框\r\n\t\t\topenRemoveModal(data) {\r\n\t\t\t\tthis.nodeData = data;\r\n\t\t\t\tthis.delModalShow = true;\r\n\r\n\t\t\t\t// node删除  不必刷新界面\r\n\t\t\t\t// remove(node,data){\r\n\t\t\t\t// \tthis.$msgbox({\r\n\t\t\t\t// \t\ttype:'warning',\r\n\t\t\t\t// \t\ttitle:'',\r\n\t\t\t\t// \t\tmessage:\"删除\"\r\n\t\t\t\t// \t}).then(()=>{\r\n\t\t\t\t// \t\tCategory.remove({id:data.id}).then(res => {\r\n\t\t\t\t// \t\t\tif(res.status){\r\n\t\t\t\t// \t\t\t\tnode.remove();\r\n\t\t\t\t// \t\t\t\tthis.$message.success('删除成功')\r\n\t\t\t\t// \t\t\t}\r\n\t\t\t\t// \t\t})\r\n\t\t\t\t// \t})\r\n\t\t\t\t// }\r\n\t\t\t},\r\n\r\n\t\t\t// 注意：删除指定id分类,如果其拥有子级分类不允许删除，必须清空子分类才可删除。\r\n\t\t\t// 删除节点\r\n\t\t\tasync remove() {\r\n\t\t\t\tlet id = this.nodeData.id;\r\n\t\t\t\t// 获取请求子分类\r\n\t\t\t\tlet { status, data } = await Category.subCate({ id });\r\n\t\t\t\tif (data.length == 0) {\r\n\t\t\t\t\tlet { status, data, msg } = await Category.del({ id });\r\n\t\t\t\t\tif (status) {\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\tmessage: '删除成功',\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.delModalShow = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error(msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert('该分类下含有子分类，无法删除，请先清空子分类！');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.alert {\r\n\t\twidth: 1240px;\r\n\t\tborder: 1px solid transparent;\r\n\t\tborder-radius: 4px;\r\n\t\tbackground-color: #d9edf7;\r\n\t\tpadding: 15px;\r\n\t\tmargin-bottom: 20px;\r\n\r\n\t\t.title {\r\n\t\t\tfont-size: 24px;\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t}\r\n\t}\r\n\r\n\t.list {\r\n\t\twidth: 1250px;\r\n\t\tborder: 1px solid #337ab7;\r\n\t\tborder-radius: 5px;\r\n\r\n\t\t.title {\r\n\t\t\tfont-size: 16px;\r\n\t\t\twidth: 1220px;\r\n\t\t\tcolor: white;\r\n\t\t\tbackground-color: #337ab7;\r\n\t\t\tpadding: 10px 15px;\r\n\t\t}\r\n\t}\r\n\r\n\t.custom-tree-node {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tfont-size: 14px;\r\n\t\tpadding-right: 8px;\r\n\t}\r\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=4031f504&scoped=true&\"\nimport script from \"./List.vue?vue&type=script&lang=js&\"\nexport * from \"./List.vue?vue&type=script&lang=js&\"\nimport style0 from \"./List.vue?vue&type=style&index=0&id=4031f504&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4031f504\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}